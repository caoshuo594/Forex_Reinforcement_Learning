# ✅ MT5 EA启动检查清单

## 📋 启动前检查（必须完成所有项）

### 1. 文件检查
- [ ] ✅ `forex_policy.onnx` 在 `MQL5/Files/` 目录
- [ ] ✅ `ForexRLTrader.ex5` 已编译
- [ ] ✅ 已阅读 `DEPLOYMENT_REPORT.md`

### 2. MT5设置
- [ ] ✅ 工具 → 选项 → EA交易 → 允许EA交易
- [ ] ✅ 工具 → 选项 → EA交易 → 允许DLL导入
- [ ] ✅ 工具 → 选项 → EA交易 → 允许导入外部专家

### 3. 账户准备
- [ ] ⚠️ 使用模拟账户（强烈推荐！）
- [ ] 📊 账户余额至少 $10,000（与训练环境一致）
- [ ] 🔒 设置合理的风险控制

### 4. 图表设置
- [ ] 📊 品种: EURUSD
- [ ] ⏰ 周期: M15（15分钟）
- [ ] 📈 图表已打开

### 5. EA配置
- [ ] 📝 ModelFileName = "forex_policy.onnx"
- [ ] 💰 TradeLots = 0.1
- [ ] 🎯 Magic = 888888
- [ ] 📋 EnableLog = true

---

## 🧪 测试流程（按顺序进行）

### 阶段1: 策略测试器回测（必做）⭐
**目的**: 验证EA基本功能和历史表现

```
步骤:
1. 工具 → 策略测试器
2. 选择 ForexRLTrader
3. 设置参数:
   - 品种: EURUSD
   - 周期: M15
   - 日期: 2024-01-01 到 2025-10-31
   - 初始资金: 10,000
   - 模型: 每个报价
4. 点击 "开始"
5. 等待回测完成
```

**检查指标**:
- [ ] ✅ 总盈亏 > 0 或接近0（训练目标是-0.14奖励）
- [ ] ✅ 最大回撤 < 20%
- [ ] ✅ 交易次数合理（不过度交易）
- [ ] ✅ 无异常错误

**如果回测不通过**: 
⚠️ 不要进入下一阶段，检查模型和EA设置

---

### 阶段2: 模拟账户实时测试（推荐）⭐⭐
**目的**: 验证实时环境下的表现

**测试时长**: 至少 **1-2周**

```
步骤:
1. 登录模拟账户
2. 打开 EURUSD M15 图表
3. 将 ForexRLTrader 拖到图表
4. 确认设置正确
5. 点击 "确定" 启动EA
```

**每日检查**:
- [ ] EA正常运行（显示😊）
- [ ] 查看交易日志
- [ ] 记录盈亏情况
- [ ] 检查持仓状态

**每周总结**:
- [ ] 计算总收益率
- [ ] 计算胜率
- [ ] 分析最大回撤
- [ ] 评估交易策略

**停止条件**:
- ❌ 回撤超过30%
- ❌ 连续亏损超过10笔
- ❌ 出现技术错误

---

### 阶段3: 小资金实盘测试（谨慎）⚠️
**前提条件（必须全部满足）**:
- [x] 回测结果良好
- [x] 模拟账户测试至少2周
- [x] 模拟账户整体盈利
- [x] 充分理解模型行为
- [x] 有完善的风险管理计划

**初始配置**:
- 💰 资金: 最多 $500-1000 开始
- 📊 手数: 0.01 手（降低风险）
- ⏱️ 观察期: 至少1个月

**实盘监控**:
- [ ] 每日查看交易记录
- [ ] 每周评估表现
- [ ] 每月考虑是否继续

---

## 🚨 风险警告

### ⚠️ 重要提醒
1. **这是一个AI训练的模型，不保证盈利**
2. **历史表现不代表未来结果**
3. **市场环境变化可能导致策略失效**
4. **仅使用您能承受损失的资金**

### 🛑 立即停止EA的情况
- ❌ 单日亏损超过5%
- ❌ 回撤超过20%（模拟账户）或10%（实盘）
- ❌ 出现异常交易行为
- ❌ EA频繁报错
- ❌ 市场出现重大新闻事件

---

## 📊 性能评估标准

### 良好表现指标
- ✅ 总收益率 > 0%
- ✅ 胜率 > 45%
- ✅ 盈亏比 > 1:1
- ✅ 最大回撤 < 15%
- ✅ 月均交易次数: 20-50笔

### 需要优化指标
- ⚠️ 胜率 < 40%
- ⚠️ 盈亏比 < 0.8
- ⚠️ 最大回撤 > 20%
- ⚠️ 过度交易（日均>10笔）或不交易

### 需要停止指标
- ❌ 持续亏损超过2周
- ❌ 回撤超过30%
- ❌ 严重偏离训练表现

---

## 🔧 常见问题快速解决

| 问题 | 解决方案 |
|------|---------|
| EA显示😞 | 检查EA交易是否允许 |
| 无法加载模型 | 确认onnx文件在Files目录 |
| 不开单 | 检查市场状态、余额、日志 |
| 频繁报错 | 查看日志详细信息 |
| 滑点过大 | 调整MaxSlippagePoints参数 |

---

## 📞 获取帮助

### 日志文件位置
```
MQL5/Logs/YYYYMMDD.log
```

### 重要文件
- `DEPLOYMENT_REPORT.md` - 完整部署文档
- `forex_policy_spec.json` - 模型规格
- `training_analysis.png` - 训练分析图表
- `logs/train_monitor.csv` - 训练日志

---

## ✅ 最后确认

在启动EA前，请确认:

- [ ] ✅ 我已完成所有文件检查
- [ ] ✅ 我已正确配置MT5设置
- [ ] ✅ 我正在使用模拟账户测试
- [ ] ✅ 我已阅读并理解风险警告
- [ ] ✅ 我有完善的风险管理计划
- [ ] ✅ 我知道何时应该停止EA

**如果以上全部确认，您可以开始测试了！** 🚀

---

**记住：永远先用模拟账户测试！** ⚠️
